
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Carpet &#8212; CactusTool 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script type="text/javascript" src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CactusTool package" href="../API/CactusTool.html" />
    <link rel="prev" title="CactusTool" href="CactusTool.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../API/CactusTool.html" title="CactusTool package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="CactusTool.html" title="CactusTool"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CactusTool 0.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="main.html" accesskey="U">Tutorial</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Carpet">
<h1>Carpet<a class="headerlink" href="#Carpet" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Carpet</span></code> is a sub-module of <code class="docutils literal notranslate"><span class="pre">CactusTool</span></code>. This modular main processes output of Thorn <code class="docutils literal notranslate"><span class="pre">Carpet</span></code>. To reduce the potential bug, this part will be written as simple as possible. These class also not depend on the <code class="docutils literal notranslate"><span class="pre">CactusTool</span></code> modular and can be used alone.</p>
<p>Thorn <code class="docutils literal notranslate"><span class="pre">Carpet</span></code> provides three different I/O methods, namely <code class="docutils literal notranslate"><span class="pre">CarpetIOScalar</span></code>, <code class="docutils literal notranslate"><span class="pre">CarpetIOHDF5</span></code>, and <code class="docutils literal notranslate"><span class="pre">CarpetIOASCII</span></code>. Where <code class="docutils literal notranslate"><span class="pre">CarpetIOScalar</span></code> is time series while <code class="docutils literal notranslate"><span class="pre">CarpetIOHDF5</span></code>, and <code class="docutils literal notranslate"><span class="pre">CarpetIOASCII</span></code> is gird function. <code class="docutils literal notranslate"><span class="pre">CarpetIOHDF5</span></code> can read the corresponding data according to the header. However, <code class="docutils literal notranslate"><span class="pre">CarpetIOASCII</span></code> will read all data at once. This is not an efficient way for extremely large data files. So we recommend 1-D grid function use <code class="docutils literal notranslate"><span class="pre">CarpetIOASCII</span></code> while 2-D or 3_D use
<code class="docutils literal notranslate"><span class="pre">CarpetIOHDF5</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Carpet</span></code> module main contain three base class <code class="docutils literal notranslate"><span class="pre">CarpetIOScalar</span></code>, <code class="docutils literal notranslate"><span class="pre">CarpetIOHDF5</span></code>, and <code class="docutils literal notranslate"><span class="pre">CarpetIOASCII</span></code>. We deal with them separately, because their data structure is completely different. These class only return part of the dataset, given time, refinement level and component. We don’t recommend using all the data when drawing. Because the amount of simulation data is too large, this is no need and waste resources.</p>
<p>We’re going to get started by loading up necessary modular and specify some example file in my local computer to demonstrate the function of this module.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">from</span> <span class="nn">CactusTool.Carpet</span> <span class="kn">import</span> <span class="n">CarpetIOScalar</span>
<span class="kn">from</span> <span class="nn">CactusTool.Carpet</span> <span class="kn">import</span> <span class="n">CarpetIOHDF5</span>
<span class="kn">from</span> <span class="nn">CactusTool.Carpet</span> <span class="kn">import</span> <span class="n">CarpetIOASCII</span>
<span class="kn">from</span> <span class="nn">CactusTool.funcs</span> <span class="kn">import</span> <span class="n">filter_file</span>
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/Users/liuyu/simulations/BH/&#39;</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span> <span class="o">+</span> <span class="nb">file</span> <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="section" id="CarpetIOScalar">
<h2>CarpetIOScalar<a class="headerlink" href="#CarpetIOScalar" title="Permalink to this headline">¶</a></h2>
<p>First view all available variables in a given reduction operation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_scalar</span> <span class="o">=</span> <span class="n">CarpetIOScalar</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ds_scalar</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Available maximum timeseries:
[&#39;H&#39;, &#39;M1&#39;, &#39;M2&#39;, &#39;M3&#39;, &#39;qlm_shape[0]&#39;, &#39;qlm_shape[1]&#39;, &#39;maxrss_mb&#39;, &#39;majflt_mb&#39;, &#39;arena_mb&#39;, &#39;ordblks_mb&#39;, &#39;hblks_mb&#39;, &#39;hblkhd_mb&#39;, &#39;uordblks_mb&#39;, &#39;fordblks_mb&#39;, &#39;keepcost_mb&#39;, &#39;swap_used_mb&#39;]
Available none timeseries:
[&#39;pt_loc_t[0]&#39;, &#39;pt_loc_t[1]&#39;, &#39;pt_loc_t[2]&#39;, &#39;pt_loc_t[3]&#39;, &#39;pt_loc_t[4]&#39;, &#39;pt_loc_t[5]&#39;, &#39;pt_loc_t[6]&#39;, &#39;pt_loc_t[7]&#39;, &#39;pt_loc_t[8]&#39;, &#39;pt_loc_t[9]&#39;, &#39;pt_loc_x[0]&#39;, &#39;pt_loc_x[1]&#39;, &#39;pt_loc_x[2]&#39;, &#39;pt_loc_x[3]&#39;, &#39;pt_loc_x[4]&#39;, &#39;pt_loc_x[5]&#39;, &#39;pt_loc_x[6]&#39;, &#39;pt_loc_x[7]&#39;, &#39;pt_loc_x[8]&#39;, &#39;pt_loc_x[9]&#39;, &#39;pt_loc_y[0]&#39;, &#39;pt_loc_y[1]&#39;, &#39;pt_loc_y[2]&#39;, &#39;pt_loc_y[3]&#39;, &#39;pt_loc_y[4]&#39;, &#39;pt_loc_y[5]&#39;, &#39;pt_loc_y[6]&#39;, &#39;pt_loc_y[7]&#39;, &#39;pt_loc_y[8]&#39;, &#39;pt_loc_y[9]&#39;, &#39;pt_loc_z[0]&#39;, &#39;pt_loc_z[1]&#39;, &#39;pt_loc_z[2]&#39;, &#39;pt_loc_z[3]&#39;, &#39;pt_loc_z[4]&#39;, &#39;pt_loc_z[5]&#39;, &#39;pt_loc_z[6]&#39;, &#39;pt_loc_z[7]&#39;, &#39;pt_loc_z[8]&#39;, &#39;pt_loc_z[9]&#39;, &#39;qlm_time[0]&#39;, &#39;qlm_time[1]&#39;, &#39;qlm_equatorial_circumference[0]&#39;, &#39;qlm_equatorial_circumference[1]&#39;, &#39;qlm_polar_circumference_0[0]&#39;, &#39;qlm_polar_circumference_0[1]&#39;, &#39;qlm_polar_circumference_pi_2[0]&#39;, &#39;qlm_polar_circumference_pi_2[1]&#39;, &#39;qlm_area[0]&#39;, &#39;qlm_area[1]&#39;, &#39;qlm_irreducible_mass[0]&#39;, &#39;qlm_irreducible_mass[1]&#39;, &#39;qlm_radius[0]&#39;, &#39;qlm_radius[1]&#39;, &#39;qlm_spin_guess[0]&#39;, &#39;qlm_spin_guess[1]&#39;, &#39;qlm_mass_guess[0]&#39;, &#39;qlm_mass_guess[1]&#39;, &#39;qlm_killing_eigenvalue_re[0]&#39;, &#39;qlm_killing_eigenvalue_re[1]&#39;, &#39;qlm_killing_eigenvalue_im[0]&#39;, &#39;qlm_killing_eigenvalue_im[1]&#39;, &#39;qlm_spin[0]&#39;, &#39;qlm_spin[1]&#39;, &#39;qlm_npspin[0]&#39;, &#39;qlm_npspin[1]&#39;, &#39;qlm_wsspin[0]&#39;, &#39;qlm_wsspin[1]&#39;, &#39;qlm_cvspin[0]&#39;, &#39;qlm_cvspin[1]&#39;, &#39;qlm_coordspinx[0]&#39;, &#39;qlm_coordspinx[1]&#39;, &#39;qlm_coordspiny[0]&#39;, &#39;qlm_coordspiny[1]&#39;, &#39;qlm_coordspinz[0]&#39;, &#39;qlm_coordspinz[1]&#39;, &#39;qlm_mass[0]&#39;, &#39;qlm_mass[1]&#39;, &#39;qlm_adm_energy[0]&#39;, &#39;qlm_adm_energy[1]&#39;, &#39;qlm_adm_momentum_x[0]&#39;, &#39;qlm_adm_momentum_x[1]&#39;, &#39;qlm_adm_momentum_y[0]&#39;, &#39;qlm_adm_momentum_y[1]&#39;, &#39;qlm_adm_momentum_z[0]&#39;, &#39;qlm_adm_momentum_z[1]&#39;, &#39;qlm_adm_angular_momentum_x[0]&#39;, &#39;qlm_adm_angular_momentum_x[1]&#39;, &#39;qlm_adm_angular_momentum_y[0]&#39;, &#39;qlm_adm_angular_momentum_y[1]&#39;, &#39;qlm_adm_angular_momentum_z[0]&#39;, &#39;qlm_adm_angular_momentum_z[1]&#39;, &#39;qlm_w_energy[0]&#39;, &#39;qlm_w_energy[1]&#39;, &#39;qlm_w_momentum_x[0]&#39;, &#39;qlm_w_momentum_x[1]&#39;, &#39;qlm_w_momentum_y[0]&#39;, &#39;qlm_w_momentum_y[1]&#39;, &#39;qlm_w_momentum_z[0]&#39;, &#39;qlm_w_momentum_z[1]&#39;, &#39;qlm_w_angular_momentum_x[0]&#39;, &#39;qlm_w_angular_momentum_x[1]&#39;, &#39;qlm_w_angular_momentum_y[0]&#39;, &#39;qlm_w_angular_momentum_y[1]&#39;, &#39;qlm_w_angular_momentum_z[0]&#39;, &#39;qlm_w_angular_momentum_z[1]&#39;]

</pre></div></div>
</div>
<p>Then specify variables and their corresponding operations. <strong>Note: When specify variable name, we just simple filter it by use string ``in`` method in python.</strong> So you can specify a vector or tensor like following.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">var_scalar</span> <span class="o">=</span> <span class="n">ds_scalar</span><span class="o">.</span><span class="n">max</span><span class="p">[</span><span class="s1">&#39;M1&#39;</span><span class="p">]</span> <span class="c1"># A scalar</span>
<span class="n">var_scalar</span> <span class="o">=</span> <span class="n">ds_scalar</span><span class="o">.</span><span class="n">max</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span> <span class="c1"># A vector or tensor</span>
<span class="n">var_scalar</span> <span class="o">=</span> <span class="n">ds_scalar</span><span class="o">.</span><span class="n">max</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span> <span class="c1"># All variable</span>
</pre></div>
</div>
</div>
<p><strong>Following are some attribute of this variable you may need:</strong></p>
<div class="section" id="Dataset">
<h3>Dataset<a class="headerlink" href="#Dataset" title="Permalink to this headline">¶</a></h3>
<p>These dataset may store in different files and one file may contain many variables. Pandas DataFrame is a powerful tool to combine them and remove duplicate data. We use <code class="docutils literal notranslate"><span class="pre">pd.concat</span></code> to the same variable and <code class="docutils literal notranslate"><span class="pre">pd.merge</span></code> to different variable.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">var_scalar</span><span class="o">.</span><span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>iteration</th>
      <th>time</th>
      <th>H</th>
      <th>M1</th>
      <th>M2</th>
      <th>M3</th>
      <th>qlm_shape[0]</th>
      <th>qlm_shape[1]</th>
      <th>maxrss_mb</th>
      <th>majflt_mb</th>
      <th>arena_mb</th>
      <th>ordblks_mb</th>
      <th>hblks_mb</th>
      <th>hblkhd_mb</th>
      <th>uordblks_mb</th>
      <th>fordblks_mb</th>
      <th>keepcost_mb</th>
      <th>swap_used_mb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>390.581293</td>
      <td>6.911620</td>
      <td>23.938131</td>
      <td>0.730308</td>
      <td>-inf</td>
      <td>-inf</td>
      <td>322.0</td>
      <td>0.0</td>
      <td>282.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>251.0</td>
      <td>30.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>256.0</td>
      <td>1.0</td>
      <td>42.265903</td>
      <td>4.690899</td>
      <td>6.131249</td>
      <td>1.355362</td>
      <td>-inf</td>
      <td>-inf</td>
      <td>327.0</td>
      <td>0.0</td>
      <td>282.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>253.0</td>
      <td>39.0</td>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>2</td>
      <td>512.0</td>
      <td>2.0</td>
      <td>65.653168</td>
      <td>8.159930</td>
      <td>8.806923</td>
      <td>2.408183</td>
      <td>-inf</td>
      <td>-inf</td>
      <td>328.0</td>
      <td>0.0</td>
      <td>282.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>256.0</td>
      <td>38.0</td>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>3</td>
      <td>768.0</td>
      <td>3.0</td>
      <td>60.606439</td>
      <td>16.974336</td>
      <td>16.485445</td>
      <td>2.944662</td>
      <td>-inf</td>
      <td>0.459084</td>
      <td>345.0</td>
      <td>0.0</td>
      <td>297.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>259.0</td>
      <td>43.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>4</td>
      <td>1024.0</td>
      <td>4.0</td>
      <td>59.892898</td>
      <td>19.698239</td>
      <td>14.367274</td>
      <td>4.194277</td>
      <td>-inf</td>
      <td>0.459084</td>
      <td>351.0</td>
      <td>0.0</td>
      <td>301.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>9.0</td>
      <td>266.0</td>
      <td>44.0</td>
      <td>5.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>65</td>
      <td>16640.0</td>
      <td>65.0</td>
      <td>48.207639</td>
      <td>27.362242</td>
      <td>14.835847</td>
      <td>10.510170</td>
      <td>0.484935</td>
      <td>0.484935</td>
      <td>480.0</td>
      <td>0.0</td>
      <td>389.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>53.0</td>
      <td>315.0</td>
      <td>76.0</td>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>66</td>
      <td>16896.0</td>
      <td>66.0</td>
      <td>28.754836</td>
      <td>34.752490</td>
      <td>10.354096</td>
      <td>8.157228</td>
      <td>0.484935</td>
      <td>0.484935</td>
      <td>480.0</td>
      <td>0.0</td>
      <td>389.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>53.0</td>
      <td>315.0</td>
      <td>78.0</td>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>67</td>
      <td>17152.0</td>
      <td>67.0</td>
      <td>28.009021</td>
      <td>41.331741</td>
      <td>9.649753</td>
      <td>7.046484</td>
      <td>0.484935</td>
      <td>0.484935</td>
      <td>480.0</td>
      <td>0.0</td>
      <td>389.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>53.0</td>
      <td>315.0</td>
      <td>79.0</td>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>68</td>
      <td>17408.0</td>
      <td>68.0</td>
      <td>43.712040</td>
      <td>56.774063</td>
      <td>7.861392</td>
      <td>8.128903</td>
      <td>0.484935</td>
      <td>0.484935</td>
      <td>480.0</td>
      <td>0.0</td>
      <td>389.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>53.0</td>
      <td>315.0</td>
      <td>79.0</td>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <td>69</td>
      <td>17664.0</td>
      <td>69.0</td>
      <td>72.069296</td>
      <td>86.641334</td>
      <td>9.599766</td>
      <td>10.149837</td>
      <td>0.484935</td>
      <td>0.484935</td>
      <td>480.0</td>
      <td>0.0</td>
      <td>389.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>53.0</td>
      <td>314.0</td>
      <td>80.0</td>
      <td>10.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>70 rows × 18 columns</p>
</div></div>
</div>
</div>
<div class="section" id="Header">
<h3>Header<a class="headerlink" href="#Header" title="Permalink to this headline">¶</a></h3>
<p>Not sure it’s necessary</p>
</div>
</div>
<div class="section" id="CarpetIOASCII">
<h2>CarpetIOASCII<a class="headerlink" href="#CarpetIOASCII" title="Permalink to this headline">¶</a></h2>
<p>Mostly the same as CarpetIOScalar</p>
<p>First view all available variables in a given dimensions.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_ascii</span> <span class="o">=</span> <span class="n">CarpetIOASCII</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ds_ascii</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Available grid function with x dimension:
[&#39;H&#39;, &#39;gxx&#39;, &#39;gxy&#39;, &#39;gxz&#39;, &#39;gyy&#39;, &#39;gyz&#39;, &#39;gzz&#39;, &#39;M1&#39;, &#39;M2&#39;, &#39;M3&#39;]
Available grid function with y dimension:
[&#39;H&#39;, &#39;gxx&#39;, &#39;gxy&#39;, &#39;gxz&#39;, &#39;gyy&#39;, &#39;gyz&#39;, &#39;gzz&#39;, &#39;M1&#39;, &#39;M2&#39;, &#39;M3&#39;]
Available grid function with z dimension:
[&#39;H&#39;, &#39;gxx&#39;, &#39;gxy&#39;, &#39;gxz&#39;, &#39;gyy&#39;, &#39;gyz&#39;, &#39;gzz&#39;, &#39;M1&#39;, &#39;M2&#39;, &#39;M3&#39;]

</pre></div></div>
</div>
<p>Then specify variables and their corresponding dim.</p>
<p><strong>Note: When specify variable name, we just simple filter it by use string ``in`` method in python.</strong> So you can specify a vector or tensor like following. Not do <code class="docutils literal notranslate"><span class="pre">ds_ascii.x['']</span></code> like <code class="docutils literal notranslate"><span class="pre">CarpetIOScalar</span></code> when the sample is very huge specially in Laptop.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">var_ascii</span> <span class="o">=</span> <span class="n">ds_ascii</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p><strong>Following are some attribute of this variable you may need:</strong></p>
<div class="section" id="Dataset">
<h3>Dataset<a class="headerlink" href="#Dataset" title="Permalink to this headline">¶</a></h3>
<p>These dataset may store in different files and one file may contain many variables. Pandas DataFrame is a powerful tool to combine them and remove duplicate data.</p>
<p><code class="docutils literal notranslate"><span class="pre">dataset</span></code> is a method, because sometime we need use different way to combine data. We use <code class="docutils literal notranslate"><span class="pre">pd.concat</span></code> to do it. Following are some example. For more <code class="docutils literal notranslate"><span class="pre">pd.concat</span></code> parameter you can see <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html">https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html</a></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">var_ascii</span><span class="o">.</span><span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>it</th>
      <th>tl</th>
      <th>rl</th>
      <th>c</th>
      <th>ml</th>
      <th>ix</th>
      <th>iy</th>
      <th>iz</th>
      <th>time</th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
      <th>M1</th>
      <th>M2</th>
      <th>M3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>0.0</td>
      <td>-230.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-5.432486e-17</td>
      <td>-7.533550e-13</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <td>1</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>256.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>0.0</td>
      <td>-220.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-5.432486e-17</td>
      <td>-7.533550e-13</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <td>2</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>512.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>0.0</td>
      <td>-210.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-5.432486e-17</td>
      <td>-7.533550e-13</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <td>3</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>768.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>0.0</td>
      <td>-200.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-5.432486e-17</td>
      <td>-7.533550e-13</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <td>4</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>1024.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>0.0</td>
      <td>-190.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.353064e-17</td>
      <td>-1.138351e-12</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>70240</td>
      <td>17664.0</td>
      <td>0.0</td>
      <td>6.0</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>6036.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>69.0</td>
      <td>5.78125</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.940048e-03</td>
      <td>1.127827e-04</td>
      <td>-5.259328e-20</td>
    </tr>
    <tr>
      <td>70241</td>
      <td>17664.0</td>
      <td>0.0</td>
      <td>6.0</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>6040.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>69.0</td>
      <td>5.93750</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.817419e-03</td>
      <td>1.296465e-03</td>
      <td>2.584893e-19</td>
    </tr>
    <tr>
      <td>70242</td>
      <td>17664.0</td>
      <td>0.0</td>
      <td>6.0</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>6044.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>69.0</td>
      <td>6.09375</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.743194e-03</td>
      <td>2.491388e-03</td>
      <td>3.130308e-19</td>
    </tr>
    <tr>
      <td>70243</td>
      <td>17664.0</td>
      <td>0.0</td>
      <td>6.0</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>6048.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>69.0</td>
      <td>6.25000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>6.663053e-03</td>
      <td>3.619432e-03</td>
      <td>2.339476e-19</td>
    </tr>
    <tr>
      <td>70244</td>
      <td>17664.0</td>
      <td>0.0</td>
      <td>6.0</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>6052.0</td>
      <td>5888.0</td>
      <td>768.0</td>
      <td>69.0</td>
      <td>6.40625</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>7.529135e-03</td>
      <td>4.600984e-03</td>
      <td>1.525679e-19</td>
    </tr>
  </tbody>
</table>
<p>70245 rows × 15 columns</p>
</div></div>
</div>
</div>
</div>
<div class="section" id="CarpetIOHDF5">
<h2>CarpetIOHDF5<a class="headerlink" href="#CarpetIOHDF5" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_hdf5</span> <span class="o">=</span> <span class="n">CarpetIOHDF5</span><span class="p">(</span><span class="n">HDF5_file</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ds_hdf5</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ds_hdf5</span><span class="o">.</span><span class="n">xy</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-9-f1d6014feca3&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>ds_hdf5 <span class="ansi-blue-fg">=</span> CarpetIOHDF5<span class="ansi-blue-fg">(</span>HDF5_file<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> print<span class="ansi-blue-fg">(</span>ds_hdf5<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> print<span class="ansi-blue-fg">(</span>ds_hdf5<span class="ansi-blue-fg">.</span>xy<span class="ansi-blue-fg">.</span>vars<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;HDF5_file&#39; is not defined
</pre></div></div>
</div>
<p>Then specify variables and their corresponding dim.</p>
<p><strong>Note: When specify variable name, we just simple filter it by use string ``in`` method in python.</strong> So you can specify a vector or tensor like following.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">var_hdf5</span> <span class="o">=</span> <span class="n">ds_hdf5</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;/Users/liuyu/simulations/BH/admbase-metric.4.x.asc&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Carpet</a><ul>
<li><a class="reference internal" href="#CarpetIOScalar">CarpetIOScalar</a><ul>
<li><a class="reference internal" href="#Dataset">Dataset</a></li>
<li><a class="reference internal" href="#Header">Header</a></li>
</ul>
</li>
<li><a class="reference internal" href="#CarpetIOASCII">CarpetIOASCII</a><ul>
<li><a class="reference internal" href="#Dataset">Dataset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#CarpetIOHDF5">CarpetIOHDF5</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="CactusTool.html"
                        title="previous chapter">CactusTool</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../API/CactusTool.html"
                        title="next chapter">CactusTool package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Tutorial/Carpet.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../API/CactusTool.html" title="CactusTool package"
             >next</a> |</li>
        <li class="right" >
          <a href="CactusTool.html" title="CactusTool"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CactusTool 0.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="main.html" >Tutorial</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Yu Liu.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>